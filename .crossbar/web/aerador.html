<!DOCTYPE html>

<html>
<meta charset="utf-8"></meta>

<div class="title-row">
  <h1>Aerador</h1>
</div>

<div class='button-row'>
  <button class="add_button" onclick='addElement()'>Adcionar</button>
  <button class="add_button">Restaurar</button>
  <button class="add_button" onclick='removeAll()'>Limpar</button>
</div>

<form class='form-basic' name='aerador' id='tratador-agenda'>
  <div class='line-row'>
    <span>In√≠cio</span>
    <span>Fim</span>
  </div>

</form>

<script type="text/javascript">

  var i = 0; /* Set Global Variable i */
  function increment(){
  i += 1; /* Function for automatic increment of field's "Name" attribute. */
  }
  /*
  Tirado do site: https://www.formget.com/how-to-dynamically-add-and-remove-form-fields-using-javascript/
  ---------------------------------------------
  Function to Remove Form Elements Dynamically
  ---------------------------------------------

  */
  function removeElement(parentDiv, childDiv){
    if (childDiv == parentDiv){
      alert("The parent div cannot be removed.");
    }
    else if (document.getElementById(childDiv)){
      var child = document.getElementById(childDiv);
      var parent = document.getElementById(parentDiv);
      parent.removeChild(child);
    }
    else{
      alert("Child div has already been removed or does not exist.");
      return false;
    }
  }
  /*
  ----------------------------------------------------------------------------
  Functions that will be called upon, when user click on the Name text field.
  ----------------------------------------------------------------------------
  */
  function addElement(){
    var div = document.createElement('div');
    div.setAttribute("id", "id_" + i);
    div.setAttribute("class", 'line-row');

    var inicio = document.createElement("input");
    inicio.setAttribute("type", "text");
    inicio.setAttribute("name", "inicio_" + i);
    inicio.setAttribute('placeholder', '--:--');
    inicio.classList.add('input_list');
    $(inicio).mask("Hh:Mm", timeMask);


    var fim = document.createElement("input");
    fim.setAttribute("type", "text");
    fim.setAttribute("name", "fim_" + i);
    fim.setAttribute('placeholder', '--:--');
    fim.classList.add('input_list');
    $(fim).mask("Hh:Mm", timeMask);


    var close = document.createElement("img");
    close.setAttribute("onclick",
                       "removeElement('tratador-agenda','id_" + i + "')");
    close.setAttribute("src", "assets/delete.png");

    increment();

    div.appendChild(inicio);
    div.appendChild(fim);
    div.appendChild(close);

    document.getElementById("tratador-agenda").appendChild(div);
  }
  /*
  -----------------------------------------------------------------------------
  Functions that will be called upon, when user click on the Reset Button.
  ------------------------------------------------------------------------------
  */
  function removeAll(){
    document.getElementById('tratador-agenda').innerHTML = '';
    i = 0;
  }
</script>
</html>
